"use strict";function _slicedToArray(e,r){return _arrayWithHoles(e)||_iterableToArrayLimit(e,r)||_unsupportedIterableToArray(e,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,o,n=[],i=!0,d=!1;try{for(t=t.call(e);!(i=(a=t.next()).done)&&(n.push(a.value),!r||n.length!==r);i=!0);}catch(e){d=!0,o=e}finally{try{i||null==t.return||t.return()}finally{if(d)throw o}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=_unsupportedIterableToArray(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,d=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){d=!0,n=e},f:function(){try{i||null==t.return||t.return()}finally{if(d)throw n}}}}function _unsupportedIterableToArray(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,r):void 0}}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}window.kadenceForm={error_item:1,clearForm:function(e){e.reset()},insertAfter:function(e,r){r.parentNode.insertBefore(e,r.nextSibling)},markError:function(e,r,t){var a="";if(t.classList.contains("kb-form-has-error")||t.classList.add("kb-form-has-error"),e.classList.add("has-error"),r){switch(r){case"required":(a=e.getAttribute("data-required-message"))&&""!==a&&void 0!==a||((a=e.getAttribute("data-label"))&&""!==a&&void 0!==a||(a=kadence_blocks_form_params.item),a=a+" "+kadence_blocks_form_params[r]);break;case"mismatch":(a=e.getAttribute("data-mismatch-message"))&&""!==a&&void 0!==a||((a=e.getAttribute("data-label"))&&""!==a&&void 0!==a||(a=kadence_blocks_form_params.item),a=a+" "+kadence_blocks_form_params[r]);break;case"validation":(a=e.getAttribute("data-validation-message"))&&""!==a&&void 0!==a||((a=e.getAttribute("data-label"))&&""!==a&&void 0!==a||(a=kadence_blocks_form_params.item),a=a+" "+kadence_blocks_form_params[r])}var o=e.parentNode.querySelector(".kb-form-error-msg");o&&o.remove();var n=e.getAttribute("name")+"-error";e.setAttribute("aria-describedby",n),e.setAttribute("aria-invalid","true");var i=document.createElement("div");i.id=n,i.classList.add("kb-form-error-msg"),i.classList.add("kadence-blocks-form-warning"),i.setAttribute("role","alert"),i.innerHTML=a,e.classList.contains("kb-checkbox-style")?e.parentNode.append(i):window.kadenceForm.insertAfter(i,e)}1===window.kadenceForm.error_item&&e.focus(),window.kadenceForm.error_item++},addErrorNotice:function(e){var r=e.getAttribute("data-error-message");r&&""!==r&&void 0!==r||(r=kadence_blocks_form_params.error_message);var t=document.createElement("div");t.classList.add("kadence-blocks-form-message"),t.classList.add("kadence-blocks-form-warning"),t.innerHTML=r,window.kadenceForm.insertAfter(t,e)},isValidEmail:function(e){return new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(e)},isValidURL:function(e){return new RegExp("^(http://www.|https://www.|ftp://www.|www.|http://|https://){1}([0-9A-Za-z]+.)").test(e)},isValidTel:function(e){return new RegExp("/^[+]?[(]?[0-9]{3}[)]?[-s.]?[0-9]{3}[-s.]?[0-9]{4,6}$/im").test(e)},removeErrors:function(e){e.classList.contains("kb-form-has-error")&&e.classList.remove("kb-form-has-error");var r=e.querySelectorAll(".has-error");if(r.length)for(var t=0;t<r.length;t++){r[t].classList.remove("has-error"),r[t].removeAttribute("aria-describedby"),r[t].removeAttribute("aria-invalid");var a=r[t].parentNode.querySelector(".kb-form-error-msg");a&&a.remove()}var o=document.querySelectorAll(".kadence-blocks-form-message");if(o.length)for(t=0;t<o.length;t++)o[t].remove();var n=e.querySelectorAll(".kb-form-errors");if(n.length)for(t=0;t<n.length;t++)n[t].remove()},serialize:function(e){var r,t={},a=_createForOfIteratorHelper(e);try{for(a.s();!(r=a.n()).done;){var o=_slicedToArray(r.value,2),n=o[0],i=o[1];void 0!==t[n]?(Array.isArray(t[n])||(t[n]=[t[n]]),t[n].push(i)):t[n]=i}}catch(e){a.e(e)}finally{a.f()}return t},validateForm:function(e){var r=!1,t="";window.kadenceForm.removeErrors(e);var a=e.querySelectorAll('[data-required="yes"]');if(a.length)for(var o=0;o<a.length;o++){var n="";switch(a[o].getAttribute("data-type")){case"textarea":case"text":case"tel":""===(n=a[o].value.trim())&&(r=!0,t="required",window.kadenceForm.markError(a[o],t,e));break;case"accept":0==a[o].checked&&(r=!0,t="required",console.log("here"),window.kadenceForm.markError(a[o],t,e));break;case"select":n=a[o].value,a[o].multiple?null!==n&&0!==n.length||(r=!0,t="required",window.kadenceForm.markError(a[o],t,e)):n&&"-1"!==n||(r=!0,t="required",window.kadenceForm.markError(a[o],t,e));break;case"radio":case"checkbox":a[o].querySelector("input:checked")||(r=!0,t="required",window.kadenceForm.markError(a[o],t,e));break;case"email":""!==(n=a[o].value.trim())?window.kadenceForm.isValidEmail(n)||(r=!0,t="validation",window.kadenceForm.markError(a[o],t,e)):""===n&&(r=!0,t="required",window.kadenceForm.markError(a[o],t,e));break;case"url":""!==(n=a[o].value.trim())?window.kadenceForm.isValidURL(n)||(r=!0,t="validation",window.kadenceForm.markError(a[o],t,e)):""===n&&(r=!0,t="required",window.kadenceForm.markError(a[o],t,e))}}if(r)return window.kadenceForm.addErrorNotice(e),!1;var i=new FormData(e);return i.set("_kb_form_verify",kadence_blocks_form_params.nonce),i=new URLSearchParams(i)},createElementFromHTML:function(e){var r=document.createElement("div");return r.innerHTML=e,r.firstChild},submit:function(e,r){e.preventDefault();var t=new Event("kb-form-start-submit");window.document.body.dispatchEvent(t);var a=r.querySelector(".kb-forms-submit"),o=window.kadenceForm.validateForm(r);if(o){var n=document.createElement("div");n.classList.add("kb-form-loading"),n.innerHTML='<div class="kb-form-loading-spin"><div></div><div></div><div></div><div></div></div>',r.append(n),a.setAttribute("disabled","disabled"),a.classList.add("button-primary-disabled");var i=new XMLHttpRequest;i.open("POST",kadence_blocks_form_params.ajaxurl,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.onload=function(){if(this.status>=200&&this.status<400){var e=JSON.parse(this.response);if(e.success){var t=new CustomEvent("kb-form-success",{detail:r.querySelector('input[name="_kb_form_id"]')?r.querySelector('input[name="_kb_form_id"]').value:""});window.document.body.dispatchEvent(t),e.redirect?window.location=e.redirect:(window.kadenceForm.insertAfter(window.kadenceForm.createElementFromHTML(e.html),r),r.querySelector(".g-recaptcha")&&grecaptcha.reset(),window.kadenceForm.clearForm(r))}else e.data&&(window.kadenceForm.insertAfter(window.kadenceForm.createElementFromHTML(e.data.html),r),e.data.required&&r.querySelector('[name="'+e.data.required+'"]')&&window.kadenceForm.markError(r.querySelector('[name="'+e.data.required+'"]'),"required",r))}r.querySelector(".g-recaptcha")&&grecaptcha.reset(),a.removeAttribute("disabled"),a.classList.remove("button-primary-disabled"),r.querySelector(".kb-form-loading").remove()},i.onerror=function(){console.log("Connection error")},i.send(o.toString())}},checkParentClass:function(e,r){return e.className.split(" ").indexOf(r)>=0?e.id:e.parentNode&&window.kadenceForm.checkParentClass(e.parentNode,r)},verifySource:function(e){var r=e.querySelector('input[name="_kb_form_post_id"]');if(r&&(!r.value||"block-unknown"===r.value)){var t=window.kadenceForm.checkParentClass(e.parentNode,"widget_block");t&&(r.value=t)}},initForms:function(){var e=document.querySelectorAll("form.kb-form");if(e.length)for(var r=function(e){return function(r){window.kadenceForm.submit(r,e)}},t=0;t<e.length;t++)window.kadenceForm.verifySource(e[t]),e[t].addEventListener("submit",r(e[t]))},init:function(){if("undefined"==typeof kadence_blocks_form_params)return!1;window.kadenceForm.initForms()}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",window.kadenceForm.init):window.kadenceForm.init();