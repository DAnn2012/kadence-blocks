class KBHeader{components={};_state;root;rootID;autoTransparentSpacing;sticky;stickyTablet;stickyMobile;transparent;transparentTablet;transparentMobile;stickySection;stickySectionTablet;stickySectionMobile;activeSize="mobile";lastScrollTop=0;activeOffsetTop=0;shrinkMain=!1;shrinkMainHeight=0;shrinkMainHeightTablet=0;shrinkMainHeightMobile=0;shrinkStartHeight=0;currentTopPosition=0;anchorOffset=0;activeHeader;isSticking=!1;isTransparent=!1;constructor(a,b={}){this.root="string"==typeof a?document.querySelector(a):a,this.rootID="aaa",this.autoTransparentSpacing="1"===this.root.dataset?.autoTransparentSpacing,this.sticky="1"==this.root.dataset?.sticky,this.stickyTablet="1"==this.root.dataset?.stickyTablet,this.stickyMobile="1"==this.root.dataset?.stickyMobile,this.transparent="1"==this.root.dataset?.transparent,this.transparentTablet="1"==this.root.dataset?.transparentTablet,this.transparentMobile="1"==this.root.dataset?.transparentMobile,this.stickySection=this.root.dataset?.stickySection,this.stickySectionTablet=this.root.dataset?.stickySectionTablet,this.stickySectionMobile=this.root.dataset?.stickySectionMobile,this.shrinkMain="1"===this.root.dataset?.shrinkMain,this.shrinkMainHeight=this.root.dataset?.shrinkMainHeight,this.shrinkMainHeightTablet=this.root.dataset?.shrinkMainHeightTablet,this.shrinkMainHeightMobile=this.root.dataset?.shrinkMainHeightMobile,this.revealScrollUp="1"===this.root.dataset?.revealScrollUp,this._state="CREATED",this.transparent&&this.autoTransparentSpacing&&this.initAutoTransparentSpacing(),(this.sticky||this.stickyTablet||this.stickyMobile)&&this.stickySection&&this.initStickyHeader();var c=new Event("MOUNTED",{bubbles:!0});c.qlID=this.rootID,this.root.dispatchEvent(c),this._state="IDLE"}initAutoTransparentSpacing(){const a=this;this.setAutoTransparentSpacing(),document.onresize=a.setAutoTransparentSpacing}setAutoTransparentSpacing(){const a=this.getHeight(),b=this.root.nextElementSibling;b.style.paddingTop=a+"px"}getHeight(){return this.root.querySelector("div").clientHeight}initStickyHeader(){this.activeHeader=this.root.querySelector(".wp-block-kadence-header-desktop"),parseInt(kadenceHeaderConfig.breakPoints.desktop)<window.innerWidth?(this.activeSize="desktop",this.sticky&&(this.activeOffsetTop=this.getOffset(this.root).top)):parseInt(kadenceHeaderConfig.breakPoints.tablet)<window.innerWidth?(this.activeSize="tablet",this.stickyTablet&&(this.activeOffsetTop=this.getOffset(this.root).top)):this.stickyMobile&&(this.activeOffsetTop=this.getOffset(this.root).top),window.addEventListener("resize",this.updateSticky.bind(this),!1),window.addEventListener("scroll",this.updateSticky.bind(this),!1),window.addEventListener("load",this.updateSticky.bind(this),!1),window.addEventListener("orientationchange",this.updateSticky.bind(this)),"complete"===document.readyState&&this.updateSticky("updateActive"),document.body.classList.contains("woocommerce-demo-store")&&document.body.classList.contains("kadence-store-notice-placement-above")&&this.respondToVisibility(document.querySelector(".woocommerce-store-notice"),()=>{this.updateSticky("updateActive").bind(this)})}respondToVisibility(a,b){var c={root:document.documentElement},d=new IntersectionObserver(a=>{a.forEach(a=>{b(0<a.intersectionRatio)})},c);d.observe(a)}updateSticky(a){if(!this.activeHeader)return;const b=document.getElementsByClassName("wp-site-blocks")?.[0];var c=this.getOffset(b).top;this.anchorOffset=this.getOffset(this.root).top;var d=window.scrollY;if(this.activeSize=parseInt(kadenceHeaderConfig.breakPoints.desktop)<window.innerWidth?"desktop":parseInt(kadenceHeaderConfig.breakPoints.tablet)<window.innerWidth?"tablet":"mobile",this.activeOffsetTop=this.getOffset(this.activeHeader).top,!("desktop"===this.activeSize&&this.sticky||"tablet"===this.activeSize&&this.stickyTablet||"mobile"===this.activeSize&&this.stickyMobile))return this.activeHeader.classList.remove("item-is-fixed"),this.activeHeader.classList.remove("item-at-start"),this.activeHeader.classList.remove("item-is-stuck"),this.activeHeader.style.height=null,this.activeHeader.style.top=null,this.activeHeader.style.position="initial",(void 0).classList.remove("child-is-fixed"),void document.body.classList.remove("header-is-fixed");this.activeHeader="desktop"===this.activeSize?this.root.querySelector(".wp-block-kadence-header-desktop"):this.root.querySelector(".wp-block-kadence-header-tablet"),a&&"updateActive"===a&&(this.activeHeader.style.top="auto");var e=this.activeHeader.offsetHeight;const f="desktop"===this.activeSize?"":this.activeSize.charAt(0).toUpperCase()+this.activeSize.slice(1);if(this["transparent"+f]||(this.root.style.height=e+"px"),document.body.classList.toString().includes("boom_bar-static-top")){var g=document.querySelector(".boom_bar");c=this.getOffset(b).top-g.offsetHeight}var h=document.querySelectorAll(".kadence-before-wrapper-item");if(h.length){var j=0;for(let a=0;a<h.length;a++)j+=h[a].offsetHeight;c=this.getOffset(b).top-j}var k=document.querySelectorAll(".kadence-pro-fixed-above");if(k.length){var l=0;for(let a=0;a<k.length;a++)l+=k[a].offsetHeight;c=this.getOffset(b).top+l}const m=d-this.anchorOffset+c,n=d-this.anchorOffset+c-e,o=this.currentTopPosition+e;var p=this.activeHeader.parentNode;if((!this.shrinkStartHeight||a&&void 0!==a.type&&"orientationchange"===a.type)&&(this.shrinkStartHeight=this.activeHeader.offsetHeight),this.shrinkMain){const a="mobile"===this.activeSize?this.shrinkMainHeightMobile:"tablet"===this.activeSize?this.shrinkMainHeightTablet:this.shrinkMainHeight;if(a){var q=Math.floor(this.activeOffsetTop-c);if(this.revealScrollUp)if(window.scrollY>this.lastScrollTop)var q=Math.floor(Math.floor(this.activeOffsetTop)-Math.floor(c)+Math.floor(a));else var q=Math.floor(this.activeOffsetTop-c);const b=this.activeHeader.querySelectorAll(".custom-logo"),d=this.activeHeader.querySelector(".wp-block-kadence-header-row-center");this.shrinkStartHeight||(this.shrinkStartHeight=d.offsetHeight);const e=Math.max(a,this.shrinkStartHeight-window.scrollY);if(d.style.height=e+"px",d.style.minHeight=e+"px",d.style.maxHeight=e+"px",window.scrollY=0){if(b)for(let a=0;a<b.length;a++){const c=b[a];c.style.maxHeight="100%"}}else if(b)for(let a=0;a<b.length;a++){const c=b[a];c.style.maxHeight=e+"px"}}}if(this.activeHeader.style.position="absolute",this.revealScrollUp){var r=d>this.lastScrollTop,s=Math.floor(this.anchorOffset+e);d<=this.anchorOffset-c?(this.activeHeader.style.top=0,this.currentTopPosition=0,this.setStickyChanged(!1)):d<=s?r?(this.activeHeader.style.top=0,this.currentTopPosition=0,this.setStickyChanged(!1)):(this.activeHeader.classList.remove("item-hidden-above"),this.activeHeader.style.top=m+"px",this.currentTopPosition=m,this.setStickyChanged(!0)):d>=this.currentTopPosition&&d<=o?this.setStickyChanged(!1):(r?(this.activeHeader.classList.add("item-hidden-above"),this.activeHeader.style.top=n+"px",this.currentTopPosition=n):(this.activeHeader.classList.remove("item-hidden-above"),this.activeHeader.style.top=m+"px",this.currentTopPosition=m),this.setStickyChanged(!0))}else{var s=Math.floor(this.anchorOffset-c);d<=s?(this.activeHeader.style.top=0,this.currentTopPosition=0,this.setStickyChanged(!1)):(this.activeHeader.style.top=m+"px",this.currentTopPosition=m,this.setStickyChanged(!0))}this.lastScrollTop=d,window.scrollY==s?(this.activeHeader.classList.add("item-is-fixed"),this.activeHeader.classList.add("item-at-start"),this.activeHeader.classList.remove("item-is-stuck"),p.classList.add("child-is-fixed"),document.body.classList.add("header-is-fixed")):window.scrollY>s?this.revealScrollUp?window.scrollY<e+60&&this.activeHeader.classList.contains("item-at-start")?(this.activeHeader.style.height=null,this.activeHeader.classList.add("item-is-fixed"),this.activeHeader.classList.add("item-is-stuck"),p.classList.add("child-is-fixed"),document.body.classList.add("header-is-fixed")):(this.activeHeader.classList.add("item-is-fixed"),this.activeHeader.classList.add("item-is-stuck"),this.activeHeader.classList.remove("item-at-start"),p.classList.add("child-is-fixed"),document.body.classList.add("header-is-fixed")):(this.activeHeader.classList.add("item-is-fixed"),this.activeHeader.classList.remove("item-at-start"),this.activeHeader.classList.add("item-is-stuck"),p.classList.add("child-is-fixed"),document.body.classList.add("header-is-fixed")):this.activeHeader.classList.contains("item-is-fixed")&&(this.activeHeader.classList.remove("item-is-fixed"),this.activeHeader.classList.remove("item-at-start"),this.activeHeader.classList.remove("item-is-stuck"),this.activeHeader.style.height=null,p.classList.remove("child-is-fixed"),document.body.classList.remove("header-is-fixed"))}setStickyChanged(a){if(this.isSticking!=a){this.isSticking=a;var b=new Event("KADENCE_HEADER_STICKY_CHANGED",{bubbles:!0});b.isSticking=this.isSticking,this.root.dispatchEvent(b)}}setTransparentChanged(a){if(this.isTransparent!=a){this.isTransparent=a;var b=new Event("KADENCE_HEADER_STICKY_CHANGED",{bubbles:!0});b.isTransparent=this.isTransparent,this.root.dispatchEvent(b)}}getOffset(a){if(a instanceof HTMLElement){var b=a.getBoundingClientRect();return{top:b.top+window.pageYOffset,left:b.left+window.pageXOffset}}return{top:null,left:null}}get state(){return this._state}set state(a){this._state=a;var b=new Event("STATE");b.val=a,b.qlID=this.rootID,this.root.dispatchEvent(b)}}window.KBHeader=KBHeader;const initKBHeader=()=>{window.KBHeaderBlocks=[];var a=document.querySelectorAll(".wp-block-kadence-header");for(let c=0;c<a.length;c++){var b=a[c];const d=new KBHeader(b);window.KBHeaderBlocks.push(d)}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initKBHeader):initKBHeader();