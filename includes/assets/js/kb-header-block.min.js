class KBHeader{components={};_state;root;rootID;autoTransparentSpacing;style;styleTablet;styleMobile;stickySection;stickySectionTablet;stickySectionMobile;activeSize="mobile";lastScrollTop=0;activeOffsetTop=0;shrinkMain=!1;shrinkMainHeight=0;shrinkMainHeightTablet=0;shrinkMainHeightMobile=0;shrinkStartHeight=0;currentTopPosition=0;anchorOffset=0;activeHeader;constructor(a,b={}){this.root="string"==typeof a?document.querySelector(a):a,this.rootID="aaa",this.autoTransparentSpacing="1"===this.root.dataset?.autoTransparentSpacing,this.style=this.root.dataset?.style,this.styleTablet=this.root.dataset?.styleTablet,this.styleMobile=this.root.dataset?.styleMobile,this.stickySection=this.root.dataset?.stickySection,this.stickySectionTablet=this.root.dataset?.stickySectionTablet,this.stickySectionMobile=this.root.dataset?.stickySectionMobile,this.shrinkMain="1"===this.root.dataset?.shrinkMain,this.shrinkMainHeight=this.root.dataset?.shrinkMainHeight,this.shrinkMainHeightTablet=this.root.dataset?.shrinkMainHeightTablet,this.shrinkMainHeightMobile=this.root.dataset?.shrinkMainHeightMobile,this.revealScrollUp="1"===this.root.dataset?.revealScrollUp,this._state="CREATED","transparent"==this.style&&this.autoTransparentSpacing&&this.initAutoTransparentSpacing(),(this.style.includes("sticky")||this.styleTablet.includes("sticky")||this.styleMobile.includes("sticky"))&&this.stickySection&&this.initStickyHeader();var c=new Event("MOUNTED",{bubbles:!0});c.qlID=this.rootID,this.root.dispatchEvent(c),this._state="IDLE"}initAutoTransparentSpacing(){const a=this;this.setAutoTransparentSpacing(),document.onresize=a.setAutoTransparentSpacing}setAutoTransparentSpacing(){const a=this.getHeight(),b=this.root.nextElementSibling;b.style.paddingTop=a+"px"}getHeight(){return this.root.querySelector("div").clientHeight}initStickyHeader(){this.activeHeader=this.root.querySelector(".wp-block-kadence-header-desktop"),parseInt(kadenceHeaderConfig.breakPoints.desktop)<window.innerWidth?(this.activeSize="desktop","sticky"==this.style&&(this.activeOffsetTop=this.getOffset(this.root).top)):parseInt(kadenceHeaderConfig.breakPoints.tablet)<window.innerWidth?(this.activeSize="tablet","sticky"==this.styleTablet&&(this.activeOffsetTop=this.getOffset(this.root).top)):"sticky"==this.styleMobile&&(this.activeOffsetTop=this.getOffset(this.root).top),window.addEventListener("resize",this.updateSticky.bind(this),!1),window.addEventListener("scroll",this.updateSticky.bind(this),!1),window.addEventListener("load",this.updateSticky.bind(this),!1),window.addEventListener("orientationchange",this.updateSticky.bind(this)),"complete"===document.readyState&&this.updateSticky("updateActive"),document.body.classList.contains("woocommerce-demo-store")&&document.body.classList.contains("kadence-store-notice-placement-above")&&this.respondToVisibility(document.querySelector(".woocommerce-store-notice"),()=>{this.updateSticky("updateActive").bind(this)})}respondToVisibility(a,b){var c={root:document.documentElement},d=new IntersectionObserver(a=>{a.forEach(a=>{b(0<a.intersectionRatio)})},c);d.observe(a)}updateSticky(a){var b=document.getElementById("wrapper"),c=document.querySelectorAll(".kadence-pro-fixed-above"),d=document.querySelectorAll(".kadence-before-wrapper-item"),e=this.getOffset(b).top;this.anchorOffset=this.getOffset(this.root).top;var f=window.scrollY;if(this.activeHeader){if(this.activeSize=parseInt(kadenceHeaderConfig.breakPoints.desktop)<window.innerWidth?"desktop":parseInt(kadenceHeaderConfig.breakPoints.tablet)<window.innerWidth?"tablet":"mobile",this.activeOffsetTop=this.getOffset(this.activeHeader).top,!("desktop"==this.activeSize&&this.style.includes("sticky")||"tablet"==this.activeSize&&this.styleTablet.includes("sticky")||"mobile"==this.activeSize&&this.styleMobile.includes("sticky")))return this.activeHeader.classList.remove("item-is-fixed"),this.activeHeader.classList.remove("item-at-start"),this.activeHeader.classList.remove("item-is-stuck"),this.activeHeader.style.height=null,this.activeHeader.style.top=null,(void 0).classList.remove("child-is-fixed"),void document.body.classList.remove("header-is-fixed");this.activeHeader="desktop"==this.activeSize?this.root.querySelector(".wp-block-kadence-header-desktop"):this.root.querySelector(".wp-block-kadence-header-tablet"),a&&"updateActive"===a&&(this.activeHeader.style.top="auto");var g=this.activeHeader.offsetHeight;if(this.root.style.height=g+"px",document.body.classList.toString().includes("boom_bar-static-top")){var h=document.querySelector(".boom_bar");e=this.getOffset(b).top-h.offsetHeight}if(d.length){var j=0;for(let a=0;a<d.length;a++)j+=d[a].offsetHeight;e=this.getOffset(b).top-j}if(c.length){var k=0;for(let a=0;a<c.length;a++)k+=c[a].offsetHeight;e=this.getOffset(b).top+k}var l=this.activeHeader.parentNode;if((!this.shrinkStartHeight||a&&void 0!==a.type&&"orientationchange"===a.type)&&(this.shrinkStartHeight=this.activeHeader.offsetHeight),this.shrinkMain){var m="mobile"==this.activeSize?this.shrinkMainHeightMobile:"tablet"==this.activeSize?this.shrinkMainHeightTablet:this.shrinkMainHeight;if(m){var n=Math.floor(this.activeOffsetTop-e);if(this.revealScrollUp)if(window.scrollY>this.lastScrollTop)var n=Math.floor(Math.floor(this.activeOffsetTop)-Math.floor(e)+Math.floor(startHeight));else var n=Math.floor(this.activeOffsetTop-e);var o=this.activeHeader.querySelectorAll(".custom-logo"),p=this.activeHeader.querySelector(".wp-block-kadence-header-row-center");if(this.shrinkStartHeight||(this.shrinkStartHeight=p.offsetHeight),window.scrollY<=n){if(p.style.height=this.shrinkStartHeight+"px",p.style.minHeight=this.shrinkStartHeight+"px",p.style.maxHeight=this.shrinkStartHeight+"px",o)for(let a=0;a<o.length;a++){const b=o[a];b.style.maxHeight="100%"}}else if(window.scrollY>n){var q=Math.max(m,this.shrinkStartHeight-(window.scrollY-(this.activeOffsetTop-e)));if(p.style.height=q+"px",p.style.minHeight=q+"px",p.style.maxHeight=q+"px",o)for(let a=0;a<o.length;a++){const b=o[a];b.style.maxHeight=q+"px"}}}}if(this.revealScrollUp){var r=f>this.lastScrollTop,s=Math.floor(this.anchorOffset+g);if(f<=this.anchorOffset-e)this.activeHeader.style.top=0,this.currentTopPosition=0;else if(f<=s){if(r)this.activeHeader.style.top=0,this.currentTopPosition=0;else{this.activeHeader.classList.remove("item-hidden-above");var t=f-this.anchorOffset+e;this.activeHeader.style.top=t+"px",this.currentTopPosition=t}}else if(r){this.activeHeader.classList.add("item-hidden-above");var t=f-this.anchorOffset+e-g;this.activeHeader.style.top=t+"px",this.currentTopPosition=t}else{this.activeHeader.classList.remove("item-hidden-above");var t=f-this.anchorOffset+e;this.activeHeader.style.top=t+"px",this.currentTopPosition=t}this.activeHeader.style.top=t+"px"}else{var s=Math.floor(this.anchorOffset-e);if(f<=s)this.activeHeader.style.top=0,this.currentTopPosition=0;else{var t=f-this.anchorOffset+e;this.activeHeader.style.top=t+"px",this.currentTopPosition=t}}this.lastScrollTop=f,window.scrollY==s?(this.activeHeader.classList.add("item-is-fixed"),this.activeHeader.classList.add("item-at-start"),this.activeHeader.classList.remove("item-is-stuck"),l.classList.add("child-is-fixed"),document.body.classList.add("header-is-fixed")):window.scrollY>s?this.revealScrollUp?window.scrollY<g+60&&this.activeHeader.classList.contains("item-at-start")?(this.activeHeader.style.height=null,this.activeHeader.classList.add("item-is-fixed"),this.activeHeader.classList.add("item-is-stuck"),l.classList.add("child-is-fixed"),document.body.classList.add("header-is-fixed")):(this.activeHeader.classList.add("item-is-fixed"),this.activeHeader.classList.add("item-is-stuck"),this.activeHeader.classList.remove("item-at-start"),l.classList.add("child-is-fixed"),document.body.classList.add("header-is-fixed")):(this.activeHeader.classList.add("item-is-fixed"),this.activeHeader.classList.remove("item-at-start"),this.activeHeader.classList.add("item-is-stuck"),l.classList.add("child-is-fixed"),document.body.classList.add("header-is-fixed")):this.activeHeader.classList.contains("item-is-fixed")&&(this.activeHeader.classList.remove("item-is-fixed"),this.activeHeader.classList.remove("item-at-start"),this.activeHeader.classList.remove("item-is-stuck"),this.activeHeader.style.height=null,l.classList.remove("child-is-fixed"),document.body.classList.remove("header-is-fixed"))}}getOffset(a){if(a instanceof HTMLElement){var b=a.getBoundingClientRect();return{top:b.top+window.pageYOffset,left:b.left+window.pageXOffset}}return{top:null,left:null}}get state(){return this._state}set state(a){this._state=a;var b=new Event("STATE");b.val=a,b.qlID=this.rootID,this.root.dispatchEvent(b)}}window.KBHeader=KBHeader;const init=()=>{window.KBHeaderBlocks=[];var a=document.querySelectorAll(".wp-block-kadence-header");for(let c=0;c<a.length;c++){var b=a[c];const d=new KBHeader(b);window.KBHeaderBlocks.push(d)}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",init):init();